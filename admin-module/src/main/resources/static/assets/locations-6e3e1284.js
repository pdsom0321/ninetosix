import{g as X,r as C,h as Y,o as d,c as a,a as t,d as k,F as y,b,_ as Q,t as f,w as p,v as m,n as v,u as D}from"./index-306eb029.js";import{p as N,a as M,_ as P}from"./popupModule-4d058fbf.js";import{u as T}from"./company-d9b36733.js";const W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHoSURBVDiNlZM/aFNRGMV/9yYv4ntQa5cKQiwERWjRRReLg9qKJETaQoJ0UqroIDi0g4VILa5KIB0E0U2K5NVKoVqo7SCpTgoOYnGR4p9GtI8umshL3/scTMozJMWe6R7u+R2+y+VT1Ckx3d8lyEWF9CB0AKBYEdSCQt1/OvDkXTCvaodUPhUpGW4W4Qqg64ur8hB11/SMYTttu5sFqXwqUg5X5gQ52QSs16K5EYnbadvVACXDzW4DBjhVMtzbACox3d8F/lsgtBVxYPd+ju45wuTyIwQB8LTvHw4r/EvyH/Ct7nEsw6TiV8h/mAII+VoPaYGeYDisQw3gm1iGiVN2WPr6Knjdq4FozbXu2EXuRJbBg+cAiLXGGD82hmVYrP9eJ/NyjNWfq8GCfWH4+yCAs7Ek0ZYogy1R2na2cXxvN5Zh4ZQdRpdu1MMAooHPNfdweZIXXwoAnOk4jWVYrJUdrhcyjWCAT1pQz2vOF587r7ObJWtlh9FChuKvYiMYQc03/MawDnGh8zyzH581hQHP1xxSAInHfRMoudos2UgKcrMDM9c0gOkZw8DiNuiF4o/2EagujZ22XXMjEkcxAXhboJ6C3Lfv7fE3l+9VqpP8q+RUstPXegjoheo6w4qg5kXLg7m+mffB/B94Za7eE9WUdgAAAABJRU5ErkJggg==",S={class:"text-center h-100"},j={class:"card h-100 rounded-0"},q={class:"card-header"},F={class:"card-body h-100 overflow-auto"},G={class:"table table-hover align-middle"},H=t("th",null,"ID",-1),K=t("th",null,"위치명",-1),J=t("th",null,"위도",-1),O=t("th",null,"경도",-1),z={key:0},Z=t("th",{colspan:"100"},null,-1),$=["readonly","onUpdate:modelValue"],tt=["readonly","onUpdate:modelValue"],et=["readonly","onUpdate:modelValue"],ot={class:"dropdown"},nt={class:"text-primary border-0 bg-transparent",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},st={class:"dropdown-menu"},dt={class:"dropdown-item",href:"#"},at={key:0},lt={key:0,class:"btn-group"},ct=["onClick"],rt=["onClick"],it={key:1},ut={key:0},pt=t("img",{src:W},null,-1),mt=[pt],_t=["onClick"],ht=t("span",{class:"fw-bold"},"+",-1),At=[ht],gt=t("td",null,"auto",-1),yt=["onUpdate:modelValue"],bt=["onUpdate:modelValue"],ft=["onUpdate:modelValue"],vt={key:0},Vt={colspan:"100"},Ct=["onClick"],Ut={__name:"locations",props:{data:{type:Object}},setup(I){const g=I,u=T(),V=X(""),r=C([]),_=C([]),A=({id:n,method:l,data:i},o)=>{const c={url:n?`/location/${n}`:"/location",method:l};i&&(c.data=i),M.api(c).then(s=>{console.log(s),o(s)})},h=()=>{r.splice(0),A({method:"get"},l=>{let i=l.map(s=>({...s,companies:s.companyList.length})),o=i.filter(s=>s.companyList.findIndex(e=>e.id===u.compId)>-1).sort((s,e)=>s.name<e.name?-1:s.name>e.name?1:0),c=i.filter(s=>s.companyList.findIndex(e=>e.id===u.compId)==-1).sort((s,e)=>s.name<e.name?-1:s.name>e.name?1:0);P.merge(r,[...o,...c])})},U=Y(()=>r.filter(n=>n.name.indexOf(V.value)>-1)),L=n=>{const l={method:"post",data:{name:_[n].name,latitude:_[n].latitude,longitude:_[n].longitude}};A(l,()=>{_.splice(n,1),h()})},w=n=>{const l={id:r[n].id,method:"put",data:{name:r[n].name,latitude:r[n].latitude,longitude:r[n].longitude}};A(l,()=>{h()})},x=n=>{if(confirm("정말 삭제하시겠습니까?")){const l={id:r[n].id,method:"delete"};A(l,()=>{h()})}},B=n=>{M.api({url:"/company-location",data:{companyId:u.compId,locationId:r[n].id}}).then(()=>{h();let l=u.compId;u.compId=0,u.compId=l})},E=n=>{V.value=n.target.value},R=()=>{N.popup({component:Q(()=>import("./kakaoMap-148de089.js"),["assets/kakaoMap-148de089.js","assets/index-306eb029.js","assets/index-00d070bc.css","assets/popupModule-4d058fbf.js","assets/popupModule-c5e17bca.css","assets/kakaoMap-16920f69.css"]),data:{isModal:!0}}).ok(n=>{console.log(n)})};return h(),(n,l)=>{var i;return d(),a("div",S,[t("div",j,[t("div",q,[t("input",{type:"text",class:"form-control",placeholder:"위치 검색",onInput:E},null,32)]),t("div",F,[t("table",G,[t("thead",{class:"text-end"},[t("tr",null,[t("th",{colspan:"100"},[t("button",{class:"btn btn-sm btn-outline-secondary mx-2",onClick:R},"추가")])])]),t("thead",null,[t("tr",null,[H,K,J,O,(i=g.data)!=null&&i.isModal?k("",!0):(d(),a("th",z,"매핑된 회사 수")),Z])]),t("tbody",null,[(d(!0),a(y,null,b(U.value,(o,c)=>{var s;return d(),a("tr",null,[t("td",null,f(o.id),1),t("td",null,[p(t("input",{class:v(["form-control text-center",o.editMode?"":"border-0 bg-transparent"]),type:"text",readonly:!o.editMode,"onUpdate:modelValue":e=>o.name=e},null,10,$),[[m,o.name]])]),t("td",null,[p(t("input",{class:v(["form-control text-center",o.editMode?"":"border-0 bg-transparent"]),type:"text",readonly:!o.editMode,"onUpdate:modelValue":e=>o.latitude=e},null,10,tt),[[m,o.latitude]])]),t("td",null,[p(t("input",{class:v(["form-control text-center",o.editMode?"":"border-0 bg-transparent"]),type:"text",readonly:!o.editMode,"onUpdate:modelValue":e=>o.longitude=e},null,10,et),[[m,o.longitude]])]),t("td",null,[t("div",ot,[t("button",nt,f(o.companies),1),t("ul",st,[(d(!0),a(y,null,b(o.companyList,e=>(d(),a("li",null,[t("a",dt,f(e.name),1)]))),256))])])]),(s=g.data)!=null&&s.isModal?(d(),a("td",it,[o.companyList.findIndex(e=>e.id===D(u).compId)>-1?(d(),a("span",ut,mt)):(d(),a("button",{key:1,onClick:e=>B(c),class:"btn btn-sm btn-outline-secondary fw-bold"},At,8,_t))])):(d(),a("td",at,[o.editMode?(d(),a("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:e=>w(c)}," 저장 ",8,rt)):(d(),a("div",lt,[t("button",{class:"btn btn-sm btn-outline-danger",onClick:e=>x(c)}," 삭제 ",8,ct)]))]))])}),256)),(d(!0),a(y,null,b(_,(o,c)=>{var s;return d(),a("tr",null,[gt,t("td",null,[p(t("input",{class:"form-control",type:"text","onUpdate:modelValue":e=>o.name=e},null,8,yt),[[m,o.name]])]),t("td",null,[p(t("input",{class:"form-control",type:"text","onUpdate:modelValue":e=>o.latitude=e},null,8,bt),[[m,o.latitude]])]),t("td",null,[p(t("input",{class:"form-control",type:"text","onUpdate:modelValue":e=>o.longitude=e},null,8,ft),[[m,o.longitude]])]),(s=g.data)!=null&&s.isModal?k("",!0):(d(),a("td",vt,"-")),t("td",Vt,[t("button",{class:"btn btn-sm btn-outline-success",onClick:e=>L(c)}," 저장 ",8,Ct)])])}),256))])])])])])}}};export{Ut as default};
