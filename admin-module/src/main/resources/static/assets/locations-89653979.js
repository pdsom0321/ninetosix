import{g as R,r as w,h as X,o as d,c as l,a as t,d as I,F as A,b as g,_ as Y,t as u,u as Q,w as y,v as b}from"./index-137d5679.js";import{p as D,a as L,_ as N}from"./popupModule-da787f0b.js";import{u as P}from"./company-59861896.js";const T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHoSURBVDiNlZM/aFNRGMV/9yYv4ntQa5cKQiwERWjRRReLg9qKJETaQoJ0UqroIDi0g4VILa5KIB0E0U2K5NVKoVqo7SCpTgoOYnGR4p9GtI8umshL3/scTMozJMWe6R7u+R2+y+VT1Ckx3d8lyEWF9CB0AKBYEdSCQt1/OvDkXTCvaodUPhUpGW4W4Qqg64ur8hB11/SMYTttu5sFqXwqUg5X5gQ52QSs16K5EYnbadvVACXDzW4DBjhVMtzbACox3d8F/lsgtBVxYPd+ju45wuTyIwQB8LTvHw4r/EvyH/Ct7nEsw6TiV8h/mAII+VoPaYGeYDisQw3gm1iGiVN2WPr6Knjdq4FozbXu2EXuRJbBg+cAiLXGGD82hmVYrP9eJ/NyjNWfq8GCfWH4+yCAs7Ek0ZYogy1R2na2cXxvN5Zh4ZQdRpdu1MMAooHPNfdweZIXXwoAnOk4jWVYrJUdrhcyjWCAT1pQz2vOF587r7ObJWtlh9FChuKvYiMYQc03/MawDnGh8zyzH581hQHP1xxSAInHfRMoudos2UgKcrMDM9c0gOkZw8DiNuiF4o/2EagujZ22XXMjEkcxAXhboJ6C3Lfv7fE3l+9VqpP8q+RUstPXegjoheo6w4qg5kXLg7m+mffB/B94Za7eE9WUdgAAAABJRU5ErkJggg==",W={class:"text-center h-100"},S={class:"card h-100 rounded-0"},j={class:"card-header"},q={class:"card-body h-100 overflow-auto"},F={class:"table table-hover align-middle"},G=t("colgroup",null,[t("col",{width:""}),t("col",{width:"30%"}),t("col",{width:""}),t("col",{width:""}),t("col",{width:""}),t("col",{width:""})],-1),H={class:"text-end"},K={colspan:"100"},J=t("th",null,"ID",-1),O=t("th",null,"위치명",-1),Z=t("th",null,"위도",-1),z=t("th",null,"경도",-1),$={key:0},tt=t("th",{colspan:"100"},null,-1),ot=["onClick"],nt={class:"dropdown"},et={class:"text-primary border-0 bg-transparent",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},st={class:"dropdown-menu"},at={class:"dropdown-item",href:"#"},dt={key:0},lt={key:0,class:"btn-group"},ct=["onClick"],it=["onClick"],rt={key:1},ut={key:0},mt=t("img",{src:T},null,-1),pt=[mt],ht=["onClick"],_t=t("span",{class:"fw-bold"},"+",-1),At=[_t],gt=t("td",null,"auto",-1),yt=["onUpdate:modelValue"],bt=["onUpdate:modelValue"],vt=["onUpdate:modelValue"],ft={key:0},kt={colspan:"100"},Ct=["onClick"],Vt={__name:"locations",props:{data:{type:Object}},setup(V){const _=V,r=P(),v=R(""),m=w([]),x=w([]),h=({id:n,method:a,data:c},e)=>{const i={url:n?`/location/${n}`:"/location",method:a};c&&(i.data=c),L.api(i).then(s=>{console.log(s),e(s)})},p=()=>{m.splice(0),h({method:"get"},a=>{let c=a.map(s=>({...s,companies:s.companyList.length})),e=c.filter(s=>s.companyList.findIndex(o=>o.id===r.compId)>-1).sort((s,o)=>s.name<o.name?-1:s.name>o.name?1:0),i=c.filter(s=>s.companyList.findIndex(o=>o.id===r.compId)==-1).sort((s,o)=>s.name<o.name?-1:s.name>o.name?1:0);N.merge(m,[...e,...i])})},M=X(()=>m.filter(n=>n.name.indexOf(v.value)>-1)),f=n=>{const a={method:"post",data:{name:n.name,latitude:n.lat,longitude:n.lng}};h(a,()=>{p()})},k=n=>{const a={id:n.id,method:"put",data:{name:n.name,latitude:n.lat,longitude:n.lng}};h(a,()=>{p()})},B=n=>{if(confirm("정말 삭제하시겠습니까?")){const a={id:m[n].id,method:"delete"};h(a,()=>{p()})}},U=n=>{L.api({url:"/company-location",data:{companyId:r.compId,locationId:m[n].id}}).then(()=>{p();let a=r.compId;r.compId=0,r.compId=a})},E=n=>{v.value=n.target.value},C=(n,a)=>{D.popup({component:Y(()=>import("./kakaoMap-5ae28dbd.js"),["assets/kakaoMap-5ae28dbd.js","assets/index-137d5679.js","assets/index-00d070bc.css","assets/popupModule-da787f0b.js","assets/popupModule-c5e17bca.css","assets/kakaoMap-16920f69.css"]),data:{isModal:!0,location:n,method:a},event:["addLocation","saveLocation"]}).ok(c=>{console.log(c)}).saveLocation(c=>{k(c),alert("수정되었습니다.")}).addLocation(c=>{f(c),alert("등록되었습니다.")})};return p(),(n,a)=>{var c;return d(),l("div",W,[t("div",S,[t("div",j,[t("input",{type:"text",class:"form-control",placeholder:"위치 검색",onInput:E},null,32)]),t("div",q,[t("table",F,[G,t("thead",H,[t("tr",null,[t("th",K,[t("button",{class:"btn btn-sm btn-outline-secondary mx-2",onClick:a[0]||(a[0]=e=>C(null,"post"))}," 추가 ")])])]),t("thead",null,[t("tr",null,[J,O,Z,z,(c=_.data)!=null&&c.isModal?I("",!0):(d(),l("th",$,"매핑된 회사 수")),tt])]),t("tbody",null,[(d(!0),l(A,null,g(M.value,(e,i)=>{var s;return d(),l("tr",null,[t("td",null,u(e.id),1),t("td",null,[t("a",{href:"#",onClick:o=>C(e,"put"),class:"text-primary"},u(e.name),9,ot)]),t("td",null,u(e.latitude)+" ",1),t("td",null,u(e.longitude)+" ",1),t("td",null,[t("div",nt,[t("button",et,u(e.companies),1),t("ul",st,[(d(!0),l(A,null,g(e.companyList,o=>(d(),l("li",null,[t("a",at,u(o.name),1)]))),256))])])]),(s=_.data)!=null&&s.isModal?(d(),l("td",rt,[e.companyList.findIndex(o=>o.id===Q(r).compId)>-1?(d(),l("span",ut,pt)):(d(),l("button",{key:1,onClick:o=>U(i),class:"btn btn-sm btn-outline-secondary fw-bold"},At,8,ht))])):(d(),l("td",dt,[e.editMode?(d(),l("button",{key:1,class:"btn btn-sm btn-outline-success",onClick:o=>k(i)}," 저장 ",8,it)):(d(),l("div",lt,[t("button",{class:"btn btn-sm btn-outline-danger",onClick:o=>B(i)}," 삭제 ",8,ct)]))]))])}),256)),(d(!0),l(A,null,g(x,(e,i)=>{var s;return d(),l("tr",null,[gt,t("td",null,[y(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o=>e.name=o},null,8,yt),[[b,e.name]])]),t("td",null,[y(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o=>e.latitude=o},null,8,bt),[[b,e.latitude]])]),t("td",null,[y(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o=>e.longitude=o},null,8,vt),[[b,e.longitude]])]),(s=_.data)!=null&&s.isModal?I("",!0):(d(),l("td",ft,"-")),t("td",kt,[t("button",{class:"btn btn-sm btn-outline-success",onClick:o=>f(i)}," 저장 ",8,Ct)])])}),256))])])])])])}}};export{Vt as default};
