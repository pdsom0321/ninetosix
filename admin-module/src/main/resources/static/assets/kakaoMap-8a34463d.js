import{g as w,r as h,m as L,o as d,c as i,a as o,w as m,v as u,t as k,F as M,b as P}from"./index-805b8585.js";import{_ as C}from"./popupModule-ff0188f4.js";const E={class:"card h-100 border-0"},V={class:"card-header"},A={class:"input-group"},B=o("div",{class:"card-body p-0 h-100"},[o("div",{id:"map"})],-1),K={class:"card-footer"},T={class:"input-group"},U={key:0,class:"card-footer overflow-auto p-0 text-start",style:{"max-height":"600px"}},D={class:"accordion accordion-flush",id:"acrod"},O={class:"accordion-item"},S={class:"accordion-header"},$=["onClick","data-bs-target","aria-controls"],j=["id"],F={class:"accordion-body"},I={key:1,class:"card-footer"},Y={__name:"kakaoMap",props:{data:{type:Object}},setup(b,{emit:_}){const n=b;var l=null,c=null;const v=w(""),r=h([]),a=h({lat:37.51082,lng:127.02928}),g=()=>{n.data.location&&(a.id=n.data.location.id,a.name=n.data.location.name,a.lat=n.data.location.latitude,a.lng=n.data.location.longitude);var s=document.getElementById("map"),e={center:new kakao.maps.LatLng(a.lat,a.lng),level:4};l=new kakao.maps.Map(s,e),c=new kakao.maps.Marker({position:l.getCenter()}),c.setMap(l),l.setDraggable(!0),kakao.maps.event.addListener(l,"click",t=>{var p=t.latLng;c.setPosition(p),a.lat=p.getLat(),a.lng=p.getLng()})},f=()=>{r.splice(0);var s=new kakao.maps.services.Places;s.keywordSearch(v.value,(e,t)=>{t===kakao.maps.services.Status.OK&&(console.log(e),C.merge(r,e))})},y=s=>{n.data.method="post",a.lat=s.y,a.lng=s.x,a.name=s.place_name;var e=new kakao.maps.LatLng(a.lat,a.lng);l.panTo(e),c.setPosition(e)},x=()=>{if(!a.name)return alert("위치명을 반드시 입력해주세요"),!1;confirm(`해당 위치를 ${n.data.method==="post"?"등록":"수정"}하시겠습니까?`)&&(n.data.method==="post"?_("callback","addLocation",a):_("callback","saveLocation",a),_("close"))};return L(()=>{if(window.kakao&&window.kakao.maps)g();else{const s=document.createElement("script");s.src=`//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=${{}.VITE_APP_KAKAOMAP_KEY}&libraries=services`,s.addEventListener("load",()=>{kakao.maps.load(g)}),document.head.appendChild(s)}}),(s,e)=>(d(),i("div",E,[o("div",V,[o("div",A,[m(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t)},null,512),[[u,v.value]]),o("button",{class:"btn btn-outline-secondary",type:"button",onClick:f},"검색")])]),B,o("div",K,[o("div",T,[m(o("input",{type:"text",class:"form-control",placeholder:"위치명","onUpdate:modelValue":e[1]||(e[1]=t=>a.name=t)},null,512),[[u,a.name]]),m(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>a.lat=t),disabled:""},null,512),[[u,a.lat]]),m(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>a.lng=t),disabled:""},null,512),[[u,a.lng]]),o("button",{class:"btn btn-outline-success",type:"button",onClick:x},k(n.data.method==="post"?"등록":"수정"),1)])]),r.length>0?(d(),i("div",U,[o("div",D,[(d(!0),i(M,null,P(r,t=>(d(),i("div",O,[o("h2",S,[o("button",{onClick:p=>y(t),class:"accordion-button collapsed text-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+t.id,"aria-expanded":"false","aria-controls":t.id},k(t.place_name),9,$)]),o("div",{id:t.id,class:"accordion-collapse collapse","data-bs-parent":"#acrod"},[o("div",F,[o("p",null,"카테고리 : "+k(t.category_name),1),o("p",null,"주소 : "+k(t.address_name),1)])],8,j)]))),256))])])):(d(),i("div",I,"검색결과가 없습니다."))]))}};export{Y as default};
