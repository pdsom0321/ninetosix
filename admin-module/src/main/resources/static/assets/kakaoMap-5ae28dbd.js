import{g as w,r as b,m as L,o as d,c,a as o,w as m,v as u,t as k,F as M,b as C}from"./index-137d5679.js";import{_ as V}from"./popupModule-da787f0b.js";const B={class:"card h-100 border-0"},E={class:"card-header"},P={class:"input-group"},U=o("div",{class:"card-body p-0 h-100"},[o("div",{id:"map"})],-1),D={class:"card-footer"},S={class:"input-group"},T={key:0,class:"card-footer overflow-auto p-0 text-start",style:{"max-height":"600px"}},$={class:"accordion accordion-flush",id:"acrod"},j={class:"accordion-item"},F={class:"accordion-header"},O=["onClick","data-bs-target","aria-controls"],I=["id"],K={class:"accordion-body"},N={key:1,class:"card-footer"},z={__name:"kakaoMap",props:{data:{type:Object}},setup(h,{emit:v}){const n=h;var l=null,i=null;const _=w(""),r=b([]),a=b({lat:37.51082,lng:127.02928}),g=()=>{n.data.location&&(a.id=n.data.location.id,a.name=n.data.location.name,a.lat=n.data.location.latitude,a.lng=n.data.location.longitude);var s=document.getElementById("map"),e={center:new kakao.maps.LatLng(a.lat,a.lng),level:4};l=new kakao.maps.Map(s,e),i=new kakao.maps.Marker({position:l.getCenter()}),i.setMap(l),l.setDraggable(!0),kakao.maps.event.addListener(l,"click",t=>{var p=t.latLng;i.setPosition(p),a.lat=p.getLat(),a.lng=p.getLng()})},f=()=>{r.splice(0);var s=new kakao.maps.services.Places;s.keywordSearch(_.value,(e,t)=>{t===kakao.maps.services.Status.OK&&(console.log(e),V.merge(r,e))})},y=s=>{n.data.method="post",a.lat=s.y,a.lng=s.x,a.name=s.place_name;var e=new kakao.maps.LatLng(a.lat,a.lng);l.panTo(e),i.setPosition(e)},x=()=>{if(!a.name)return alert("위치명을 반드시 입력해주세요"),!1;confirm(`해당 위치를 ${n.data.method==="post"?"등록":"수정"}하시겠습니까?`)&&(n.data.method==="post"?v("callback","addLocation",a):v("callback","saveLocation",a),v("close"))};return L(()=>{if(window.kakao&&window.kakao.maps)g();else{const s=document.createElement("script");s.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=8425cb2bc152a90c5eae2c00e29f04dc&libraries=services",s.addEventListener("load",()=>{kakao.maps.load(g)}),document.head.appendChild(s)}}),(s,e)=>(d(),c("div",B,[o("div",E,[o("div",P,[m(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t)},null,512),[[u,_.value]]),o("button",{class:"btn btn-outline-secondary",type:"button",onClick:f},"검색")])]),U,o("div",D,[o("div",S,[m(o("input",{type:"text",class:"form-control",placeholder:"위치명","onUpdate:modelValue":e[1]||(e[1]=t=>a.name=t)},null,512),[[u,a.name]]),m(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>a.lat=t),disabled:""},null,512),[[u,a.lat]]),m(o("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>a.lng=t),disabled:""},null,512),[[u,a.lng]]),o("button",{class:"btn btn-outline-success",type:"button",onClick:x},k(n.data.method==="post"?"등록":"수정"),1)])]),r.length>0?(d(),c("div",T,[o("div",$,[(d(!0),c(M,null,C(r,t=>(d(),c("div",j,[o("h2",F,[o("button",{onClick:p=>y(t),class:"accordion-button collapsed text-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+t.id,"aria-expanded":"false","aria-controls":t.id},k(t.place_name),9,O)]),o("div",{id:t.id,class:"accordion-collapse collapse","data-bs-parent":"#acrod"},[o("div",K,[o("p",null,"카테고리 : "+k(t.category_name),1),o("p",null,"주소 : "+k(t.address_name),1)])],8,I)]))),256))])])):(d(),c("div",N,"검색결과가 없습니다."))]))}};export{z as default};
